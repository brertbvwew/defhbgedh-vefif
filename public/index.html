<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NEBULA || LINK</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      background: radial-gradient(circle at 20% 20%, #0a0f2a, #000000 90%);
      color: #e2e8f0;
      font-family: "Poppins", system-ui, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    canvas#particles {
      position: fixed;
      inset: 0;
      z-index: 0;
      opacity: 0.8;
    }

    h1 {
      color: #63e6be;
      text-align: center;
      margin-bottom: 30px;
      letter-spacing: 2px;
      font-weight: 800;
      text-shadow: 0 0 10px #63e6be, 0 0 30px rgba(99, 230, 190, 0.4);
    }

    .box {
      backdrop-filter: blur(45px) saturate(180%);
      background: linear-gradient(135deg, rgba(25,38,59,0.35), rgba(10,15,25,0.45));
      border: 1px solid rgba(99,230,190,0.25);
      border-radius: 25px;
      padding: 45px;
      width: 90%;
      max-width: 500px;
      height: 85vh;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      z-index: 2;
      box-shadow: 0 0 40px rgba(0,0,0,0.8), 0 0 60px rgba(99,230,190,0.25);
    }

    .box::-webkit-scrollbar {
      display: none;
    }

    label {
      display: block;
      margin-top: 18px;
      color: #94a3b8;
      font-weight: 500;
    }

    input {
      width: 100%;
      padding: 14px;
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid rgba(99,230,190,0.1);
      background: rgba(15,23,42,0.45);
      color: #fff;
      font-size: 1rem;
      outline: none;
      transition: 0.3s;
    }

    input:focus {
      border-color: #63e6be;
      background: rgba(15,23,42,0.6);
      box-shadow: 0 0 12px rgba(99,230,190,0.6);
    }

    button {
      margin-top: 30px;
      width: 100%;
      padding: 15px;
      font-size: 1.1rem;
      border: none;
      border-radius: 14px;
      font-weight: 700;
      cursor: pointer;
      color: #0f172a;
      background: linear-gradient(90deg, #63e6be, #3b82f6, #7dd3fc);
      background-size: 200% 100%;
      box-shadow: 0 4px 25px rgba(99,230,190,0.45);
      transition: 0.3s;
    }

    button:hover {
      background-position: right center;
      transform: translateY(-3px);
      box-shadow: 0 0 40px rgba(99,230,190,0.65);
    }

    /* Countdown styling */
    #countdown {
      text-align: center;
      margin-top: 25px;
      font-size: 1.2rem;
      font-weight: 600;
      color: #93c5fd;
      text-shadow: 0 0 15px rgba(147,197,253,0.5);
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from { text-shadow: 0 0 5px #63e6be, 0 0 10px #3b82f6; }
      to { text-shadow: 0 0 15px #7dd3fc, 0 0 30px #63e6be; }
    }

    pre {
      margin-top: 30px;
      background: rgba(8,11,25,0.65);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid rgba(56,189,248,0.15);
      font-size: 0.9rem;
      color: #93c5fd;
      line-height: 1.6;
    }

    .info-section {
      margin-top: 25px;
      padding: 20px;
      border-radius: 15px;
      background: rgba(15,23,42,0.45);
      border: 1px solid rgba(99,230,190,0.2);
    }

    .info-section h2 {
      color: #63e6be;
      text-align: center;
      margin-bottom: 10px;
    }

    .info-section p, .info-section ul {
      color: #a5b4fc;
      font-size: 0.9rem;
    }

    .info-section ul {
      padding-left: 20px;
      list-style: disc;
    }

    .download-btn {
      display: block;
      margin: 20px auto 0;
      text-align: center;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      color: #0f172a;
      background: linear-gradient(90deg, #63e6be, #3b82f6);
      width: 80%;
      text-decoration: none;
      transition: 0.3s;
    }

    .download-btn:hover {
      box-shadow: 0 0 25px rgba(99,230,190,0.4);
    }

    .footer {
      margin-top: 20px;
      text-align: center;
      color: #475569;
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>

  <div class="box">
    <h1>üîë LINK NEBULA</h1>

    <div id="paidFields">
      <label for="amount">Amount:</label>
      <input id="amount" type="number" value="500" readonly>

      <label for="hash">Base64 Hash:</label>
      <input id="hash" type="text" placeholder="Enter Base64 hash string">
    </div>

    <label for="phone">Phone Number:</label>
    <input id="phone" type="tel" placeholder="Enter phone number in international format (e.g., 27884xxxxxx)">
    <button onclick="verify()">VERIFY & SUBMIT</button>

    <div id="countdown">Next server reset in: <span id="timer">Loading...</span></div>

    <pre id="output">Status: Ready to receive data...</pre>

    <div class="info-section">
      <h2>‚öôÔ∏è How It Works</h2>
      <p>
        1Ô∏è‚É£ Enter your <strong>transaction amount</strong>, <strong>Base64 hash</strong>, and <strong>phone number</strong>.<br>
        2Ô∏è‚É£ The NEBULA system securely validates and encodes your submission through encrypted verification channels.<br>
        3Ô∏è‚É£ All sessions and links automatically refresh every <strong>Sunday at 00:00 UTC</strong> during the global server reset.<br><br>
        üí† If the system is in <strong>Free Mode</strong>, only your phone number is required for validation.<br>
        üí∞ In <strong>Paid Mode</strong>, both amount and Base64 hash are required.
      </p>
    </div>

    <div class="info-section">
      <h2>üìú Rules</h2>
      <ul>
        <li>‚ö†Ô∏è Linking on a reset day may result in data invalidation schedule responsibly.</li>
        <li>‚úîÔ∏è Verify that all submitted details are correct prior to submission.</li>
        <li>üïõ The system performs a global reset every Sunday at 00:00 UTC.</li>
        <li>üí† Execution of bot operations requires a minimum balance of <strong>500 NEBULA Coins</strong>.</li>
        <li>üåÄ Please remain patient during live verification or reset cycles.</li>
      </ul>
    </div>

    <div class="info-section">
      <h2>üì≤ Install Android App</h2>
      <a class="download-btn" href="https://play.google.com/store/apps/details?id=com.coderx.creditsocial">‚¨áÔ∏è Download Android App</a>
    </div>

    <div class="footer">Secure Decode Interface v3.0</div>
  </div>

  <script>
    // === CONFIG FLAG ===
    const IS_FREE = true; // ‚úÖ true = Free mode, false = Paid mode

    // === Particle Background ===
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    let particles = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 2 + 1;
        this.speedX = (Math.random() - 0.5) * 1.3;
        this.speedY = (Math.random() - 0.5) * 1.3;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
      }
      draw() {
        ctx.fillStyle = "rgba(99, 230, 190, 0.9)";
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function initParticles(n = 120) {
      particles = [];
      for (let i = 0; i < n; i++) particles.push(new Particle());
    }

    function animateParticles() {
      ctx.fillStyle = "rgba(8, 10, 26, 0.25)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animateParticles);
    }

    initParticles();
    animateParticles();

    // === Weekly Countdown ===
    function startCountdown() {
      const timer = document.getElementById("timer");
      function updateCountdown() {
        const now = new Date();
        const day = now.getUTCDay();
        const daysUntilNextSunday = day === 0 ? 7 : 7 - day;
        const nextSunday = new Date(Date.UTC(
          now.getUTCFullYear(),
          now.getUTCMonth(),
          now.getUTCDate() + daysUntilNextSunday,
          0, 0, 0
        ));
        const diff = nextSunday - now;
        if (diff <= 0) {
          timer.textContent = "üîÑ Reset in progress...";
          return;
        }
        const totalSeconds = Math.floor(diff / 1000);
        const days = Math.floor(totalSeconds / 86400);
        const hours = Math.floor((totalSeconds % 86400) / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        timer.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }
      updateCountdown();
      setInterval(updateCountdown, 1000);
    }
    startCountdown();

    // === Handle Free/Paid visibility ===
    const paidFields = document.getElementById("paidFields");
    if (IS_FREE) {
      paidFields.style.display = "none";
    } else {
      paidFields.style.display = "block";
    }

    // === Verify ===
    async function verify() {
      const amount = document.getElementById("amount").value.trim();
      const hash = document.getElementById("hash").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const output = document.getElementById("output");

      // === International phone number validation (digits only) ===
      const intlPhoneRegex = /^[1-9]\d{7,14}$/; 

      if (!phone) {
        output.textContent = "‚ö†Ô∏è Please enter a phone number.";
        output.style.color = "#f87171";
        return;
      } else if (!intlPhoneRegex.test(phone)) {
        output.textContent = "‚ö†Ô∏è Please enter a valid international phone number (e.g., 27884xxxxxx).";
        output.style.color = "#f87171";
        return;
      }

      if (!IS_FREE && (!amount || !hash)) {
        output.textContent = "‚ö†Ô∏è Please provide amount and Base64 hash in Paid Mode.";
        output.style.color = "#f87171";
        return;
      }

      output.textContent = "‚è≥ Transmitting data... Awaiting server verification...";
      output.style.color = "#e2e8f0";

      try {
        const payload = IS_FREE
          ? { free: true, phoneNumber: phone }
          : { free: false, value: amount, hash, phoneNumber: phone };

        const res = await fetch('/verify', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });
        const data = await res.json();

        if (data.ok) {
          output.textContent = `‚úÖ SUCCESS\nMode: ${IS_FREE ? "Free" : "Paid"}\nMessage: ${data.message || "Verified successfully."}`;
          output.style.color = "#63e6be";
        } else {
          output.textContent = `‚ùå FAILED\nReason: ${data.reason || data.error || "Unknown error"}`;
          output.style.color = "#f87171";
        }
      } catch (err) {
        output.textContent = "‚ùå Network Error: " + err.message;
        output.style.color = "#f87171";
      }
    }


  </script>

  <style>
    .box { max-width:480px; margin:24px auto; padding:18px; background:#0b1020; color:#e2e8f0; border-radius:12px; font-family:Arial, sans-serif; }
    input, button { width:100%; padding:8px; margin:6px 0 12px; border-radius:6px; border:1px solid #23303f; background:#071028; color:#e2e8f0; }
    button { background:#0ea5a6; border:none; cursor:pointer; color:#02121a; font-weight:600; }
    .info-section { margin-top:16px; background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; }
    .footer { margin-top:10px; font-size:12px; text-align:center; opacity:0.6; }
    .download-btn { display:inline-block; margin-top:8px; padding:8px 10px; background:#063; color:#fff; border-radius:6px; text-decoration:none; }
  </style>
</body>

</html>
